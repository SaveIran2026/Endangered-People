<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>Endangered People</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Vazirmatn', Tahoma, Geneva, Verdana, sans-serif;
        }

        /* RTL Support for Persian */
        [dir="rtl"] {
            text-align: right;
            font-family: 'Vazirmatn', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        [dir="rtl"] .back-button {
            left: auto;
            right: 20px;
        }

        [dir="rtl"] .back-button:hover {
            transform: translateX(5px);
        }

        [dir="rtl"] .nav-arrow.left {
            left: auto;
            right: 20px;
        }

        [dir="rtl"] .nav-arrow.right {
            right: auto;
            left: 20px;
        }

        [dir="rtl"] .search-icon {
            right: auto;
            left: 20px;
        }

        [dir="rtl"] .clear-search {
            right: auto;
            left: 50px;
        }

        [dir="rtl"] .search-bar {
            padding: 16px 20px 16px 50px;
        }

        /* =========================================== */
        /* FIXED: Mobile Buttons - Always Vertical */
        /* This overrides RTL row-reverse on mobile */
        /* =========================================== */
        
        @media (max-width: 768px) {
            /* Force buttons to be vertical on ALL mobile views */
            .button-container {
                flex-direction: column !important;
                align-items: center !important;
                gap: 15px !important;
                width: 100% !important;
            }
            
            /* Explicitly override any RTL styling */
            [dir="rtl"] .button-container {
                flex-direction: column !important;
                align-items: center !important;
            }
            
            /* Make buttons full width on mobile */
            .btn {
                width: 100% !important;
                max-width: 300px !important;
                margin: 0 auto !important;
            }
        }

        body {
            color: #333;
            overflow-x: hidden;
            min-height: 100vh;
            transition: all 0.3s ease;
        }

        /* Language Toggle Button */
        .language-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 500;
            background-color: rgba(255, 255, 255, 0.9);
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 8px 15px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        [dir="rtl"] .language-toggle {
            right: auto;
            left: 20px;
        }

        .language-toggle:hover {
            background-color: #f0f0f0;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }

        .language-toggle:active {
            transform: translateY(0);
        }

        .language-flag {
            font-size: 1.2rem;
        }

        /* Page container and common styles */
        .page {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            padding: 20px;
            overflow-y: auto;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0;
            animation: pageFadeIn 0.8s ease-out forwards;
        }

        @keyframes pageFadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .page.active {
            display: block;
        }

        /* =========================================== */
        /* BACKGROUND IMAGES - ADD YOUR IMAGES HERE */
        /* =========================================== */
        
        /* Front Page - Desktop (Photo 1) */
        #front-page {
            /* REPLACE THIS URL WITH YOUR Photo 1 */
            background-image: url('assets/lionsword.JPEG');
        }

        /* Second Page - Same as front page */
        #second-page {
            /* REPLACE THIS URL WITH YOUR Photo 1 */
            background-image: url('assets/lionsword.JPEG');
        }

        /* Gallery Page - Desktop (Photo 4) */
        #gallery-page {
            /* REPLACE THIS URL WITH YOUR Photo 4 */
            background-image: url('assets/photo4.jpg');
        }

        /* Report Page - White Background */
        #report-page {
            background-color: white !important;
            background-image: none !important;
        }
        
        /* Missing Page - White Background */
        #missing-page {
            background-color: white !important;
            background-image: none !important;
        }

        /* Mobile Backgrounds */
        @media (max-width: 768px) {
            /* Front Page - Mobile (Photo 2) */
            #front-page {
                /* REPLACE THIS URL WITH YOUR Photo 2 */
                background-image: url('assets/lionsword_m.JPEG') !important;
            }
            
            /* Gallery Page - Mobile (Photo 5) */
            #gallery-page {
                /* REPLACE THIS URL WITH YOUR Photo 5 */
                background-image: url('assets/photo5.jpg') !important;
            }
            
            /* Report Page - White Background (no change) */
            #report-page {
                background-color: white !important;
                background-image: none !important;
            }
            
            /* Missing Page - White Background (no change) */
            #missing-page {
                background-color: white !important;
                background-image: none !important;
            }
        }

        .content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.363);
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0);
            min-height: calc(100vh - 40px);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            animation: contentFadeIn 1s ease-out 0.3s forwards;
        }

        @keyframes contentFadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Front page styles */
        #front-page .content {
            background-color: rgba(255, 255, 255, 0.147); 
        }

        .headline {
            font-size: 3.5rem;
            color: #000000;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
            opacity: 0;
            animation: textFadeIn 1s ease-out 0.5s forwards; 
        }

        .description {
            font-size: 1.5rem;
            color: #000000;
            text-align: center;
            max-width: 800px;
            margin-bottom: 60px;
            line-height: 1.6;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.058);
            opacity: 0;
            animation: textFadeIn 1s ease-out 0.7s forwards; 
        }

        @keyframes textFadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Button container */
        .button-container {
            display: flex;
            gap: 30px;
            width: 100%;
            justify-content: center;
            opacity: 0;
            animation: buttonsFadeIn 1s ease-out 0.9s forwards;
        }

        @keyframes buttonsFadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Button styles */
        .btn {
            padding: 16px 40px;
            font-size: 1.2rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            text-align: center;
            min-width: 180px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            opacity: 0;
            animation: buttonFadeIn 0.8s ease-out forwards;
        }

        .btn-primary {
            background-color: #5e0808;
            color: white;
            animation-delay: 1s;
        }

        .btn-secondary {
            background-color: #bd3232;
            color: #ffffff;
            border: 2px solid #dddddd00;
            animation-delay: 1.2s;
        }

        @keyframes buttonFadeIn {
            from {
                opacity: 0;
                transform: translateY(15px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .btn:active {
            transform: translateY(0);
        }

        /* Search bar styles */
        .search-container {
            width: 100%;
            max-width: 600px;
            margin: 0 auto 40px;
            position: relative;
            opacity: 0;
            animation: searchFadeIn 0.8s ease-out 0.6s forwards;
        }

        @keyframes searchFadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .search-bar {
            width: 100%;
            padding: 16px 50px 16px 20px;
            font-size: 1.1rem;
            border: 2px solid #ddd;
            border-radius: 50px;
            background-color: rgba(255, 255, 255, 0.9);
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .search-bar:focus {
            outline: none;
            border-color: #000000;
            box-shadow: 0 4px 15px rgba(26, 90, 122, 0.2);
        }

        .search-icon {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: #7777776b;
            font-size: 1.2rem;
        }

        .clear-search {
            position: absolute;
            right: 50px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #777;
            font-size: 1.2rem;
            cursor: pointer;
            display: none;
            transition: color 0.2s;
        }

        .clear-search:hover {
            color: #1a5a7a;
        }

        .search-info {
            text-align: center;
            margin-top: 10px;
            color: #666;
            font-size: 0.9rem;
            opacity: 1;
            animation: fadeIn 0.5s ease-out 1s forwards;
        }

        .no-results {
            text-align: center;
            padding: 40px;
            color: #666;
            font-size: 1.2rem;
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
            width: 100%;
            display: none;
        }

        /* Lost persons gallery */
        .gallery-container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
        }

        .gallery-title {
            font-size: 2.5rem;
            color: #000000;
            text-align: center;
            margin-bottom: 30px;
            width: 100%;
            opacity: 0;
            animation: textFadeIn 0.8s ease-out 0.4s forwards;
        }

        /* Desktop gallery (6 columns) - CHANGED from 3 to 6 */
        .desktop-gallery {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            margin-bottom: 40px;
        }
        
        /* Add this new class for desktop 6-person layout */
        .desktop-gallery.six-per-page {
            grid-template-columns: repeat(3, 1fr);
        }
        
        @media (min-width: 1024px) {
            .desktop-gallery.six-per-page {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        .person-card {
            background-color: rgba(255, 255, 255, 0.85);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(214, 8, 8, 0.1);
            transition: transform 0.3s ease;
            opacity: 0;
            animation: cardFadeIn 0.8s ease-out forwards;
        }

        .person-card:nth-child(1) { animation-delay: 0.5s; }
        .person-card:nth-child(2) { animation-delay: 0.6s; }
        .person-card:nth-child(3) { animation-delay: 0.7s; }
        .person-card:nth-child(4) { animation-delay: 0.8s; }
        .person-card:nth-child(5) { animation-delay: 0.9s; }
        .person-card:nth-child(6) { animation-delay: 1.0s; }

        @keyframes cardFadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .person-card:hover {
            transform: translateY(-5px);
        }

        .person-photo {
            width: 100%;
            height: 300px;
            object-fit: cover;
            border-bottom: 2px solid #eee;
        }

        .person-info {
            padding: 20px;
            text-align: center;
        }

        .person-name {
            font-size: 1.5rem;
            color: #000000;
            margin-bottom: 8px;
            cursor: pointer;
            transition: color 0.3s ease;
        }
        
        .person-name:hover {
            color: #5e0808;
            text-decoration: underline;
        }
        
        .person-name a {
            color: inherit;
            text-decoration: none;
            display: block;
            width: 100%;
            height: 100%;
        }
        
        .person-name a:hover {
            text-decoration: underline;
        }

        .person-date {
            font-size: 1rem;
            color: #ca1e1e;
        }

        /* Priority star indicator */
        .priority-star {
            color: #ca1e1e;
            font-weight: bold;
            margin-left: 5px;
        }
        
        [dir="rtl"] .priority-star {
            margin-left: 0;
            margin-right: 5px;
        }

        /* Mobile gallery - NOW SHOWS 8 PEOPLE PER PAGE */
        .mobile-gallery {
            display: none;
            flex-direction: column;
            gap: 20px;
        }

        .mobile-person-card {
            background-color: rgba(255, 255, 255, 0.85);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            opacity: 0;
            animation: cardFadeIn 0.8s ease-out forwards;
        }

        .mobile-person-card:nth-child(1) { animation-delay: 0.4s; }
        .mobile-person-card:nth-child(2) { animation-delay: 0.5s; }
        .mobile-person-card:nth-child(3) { animation-delay: 0.6s; }
        .mobile-person-card:nth-child(4) { animation-delay: 0.7s; }
        .mobile-person-card:nth-child(5) { animation-delay: 0.8s; }
        .mobile-person-card:nth-child(6) { animation-delay: 0.9s; }
        .mobile-person-card:nth-child(7) { animation-delay: 1.0s; }
        .mobile-person-card:nth-child(8) { animation-delay: 1.1s; }

        .mobile-person-photo {
            width: 100%;
            height: 250px;
            object-fit: cover;
        }

        .mobile-person-info {
            padding: 15px;
            text-align: center;
        }

        .mobile-person-name {
            font-size: 1.4rem;
            color: #000000;
            margin-bottom: 5px;
            cursor: pointer;
            transition: color 0.3s ease;
        }
        
        .mobile-person-name:hover {
            color: #5e0808;
            text-decoration: underline;
        }
        
        .mobile-person-name a {
            color: inherit;
            text-decoration: none;
            display: block;
            width: 100%;
            height: 100%;
        }
        
        .mobile-person-name a:hover {
            text-decoration: underline;
        }

        .mobile-person-date {
            font-size: 1rem;
            color: #b81e1e;
        }

        /* Navigation arrows - TRANSPARENT and ALWAYS VISIBLE */
        .nav-arrow {
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            width: 70px;
            height: 70px;
            color: rgba(255, 255, 255, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 4rem;
            cursor: pointer;
            border-radius: 50%;
            transition: all 0.3s ease;
            z-index: 100;
            opacity: 1 !important;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
            background-color: transparent !important;
            animation: arrowFadeIn 0.8s ease-out 1s forwards;
        }

        @keyframes arrowFadeIn {
            from {
                opacity: 0;
                transform: translateY(-50%) scale(0.8);
            }
            to {
                opacity: 1;
                transform: translateY(-50%) scale(1);
            }
        }

        .nav-arrow:hover {
            color: rgba(255, 255, 255, 1);
            text-shadow: 0 4px 15px rgba(0, 0, 0, 0.7);
            transform: translateY(-50%) scale(1.1);
        }

        .nav-arrow.left {
            left: 20px;
        }

        .nav-arrow.right {
            right: 20px;
        }

        /* =========================================== */
        /* PAGINATION - NUMERAL NAVIGATOR for BOTH Desktop AND Mobile */
        /* =========================================== */
        .pagination-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 30px;
            gap: 15px;
            flex-wrap: wrap;
            width: 100%;
        }
        
        .page-number {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.8);
            color: #333;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .page-number:hover {
            background-color: #ae2f2f;
            color: white;
            transform: scale(1.1);
        }
        
        .page-number.active {
            background-color: #ae2f2f;
            color: white;
            border: 2px solid white;
            box-shadow: 0 0 10px rgba(174, 47, 47, 0.5);
        }
        
        /* Mobile specific pagination adjustments */
        @media (max-width: 768px) {
            .pagination-container {
                gap: 10px;
                margin-top: 20px;
            }
            
            .page-number {
                width: 36px;
                height: 36px;
                font-size: 0.95rem;
            }
        }
        
        @media (max-width: 480px) {
            .page-number {
                width: 32px;
                height: 32px;
                font-size: 0.85rem;
            }
        }

        /* =========================================== */
        /* BACK BUTTON - FIXED: Always visible on all devices */
        /* =========================================== */
        .back-button {
            position: absolute;
            top: 20px;
            left: 20px;
            padding: 10px 20px;
            background-color: rgba(255, 255, 255, 0.85);
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            opacity: 0;
            animation: buttonFadeIn 0.8s ease-out 0.4s forwards;
            z-index: 600;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            pointer-events: auto; /* Ensure clicks work */
        }

        .back-button:hover {
            background-color: #f0f0f0;
            transform: translateX(-5px);
        }
        
        /* RTL adjustment for back button */
        [dir="rtl"] .back-button {
            left: auto;
            right: 20px;
        }
        
        [dir="rtl"] .back-button:hover {
            transform: translateX(5px);
        }
        
        /* Mobile specific back button - FIXED: Always visible */
        @media (max-width: 768px) {
            .back-button {
                top: 15px;
                left: 15px;
                padding: 8px 16px;
                font-size: 0.9rem;
                display: flex !important; /* Force display */
                visibility: visible !important; /* Force visibility */
                opacity: 1 !important; /* Force opacity */
            }
            
            [dir="rtl"] .back-button {
                left: auto;
                right: 15px;
            }
        }
        
        @media (max-width: 480px) {
            .back-button {
                top: 12px;
                left: 12px;
                padding: 6px 14px;
                font-size: 0.85rem;
            }
            
            [dir="rtl"] .back-button {
                left: auto;
                right: 12px;
            }
        }

        /* =========================================== */
        /* FIXED: Mobile Header - Buttons No Longer Cover Title */
        /* =========================================== */
        
        @media (max-width: 768px) {
            .page .content {
                padding-top: 80px !important;
                position: relative;
                min-height: calc(100vh - 40px);
            }
            
            .page .headline,
            .page .gallery-title {
                margin-top: 10px;
                margin-bottom: 25px;
                font-size: 1.8rem;
                line-height: 1.3;
                word-break: break-word;
                padding-left: 10px;
                padding-right: 10px;
                width: 100%;
            }
            
            .language-toggle {
                top: 15px;
                right: 15px;
                padding: 8px 16px;
                font-size: 0.9rem;
                z-index: 600;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            }
            
            [dir="rtl"] .language-toggle {
                right: auto;
                left: 15px;
            }
            
            .page .description {
                margin-top: 10px;
                margin-bottom: 30px;
                font-size: 1rem;
                padding-left: 15px;
                padding-right: 15px;
            }
            
            #gallery-page .content {
                padding-top: 80px !important;
            }
            
            #gallery-page .gallery-title {
                margin-top: 5px;
                margin-bottom: 20px;
            }
            
            #gallery-page .search-container {
                margin-top: 10px;
            }
        }

        @media (max-width: 480px) {
            .page .content {
                padding-top: 90px !important;
            }
            
            .page .headline,
            .page .gallery-title {
                font-size: 1.5rem;
                padding-left: 5px;
                padding-right: 5px;
            }
            
            .language-toggle {
                top: 12px;
                right: 12px;
                padding: 6px 14px;
                font-size: 0.85rem;
            }
            
            [dir="rtl"] .language-toggle {
                right: auto;
                left: 12px;
            }
        }

        /* Keep existing responsive styles but ensure button vertical stacking */
        @media (max-width: 1024px) {
            .headline {
                font-size: 2.8rem;
            }
            
            .description {
                font-size: 1.1rem;
                margin-bottom: 40px;
            }
            
            .btn {
                padding: 14px 30px;
                min-width: 160px;
            }
            
            .nav-arrow {
                width: 60px;
                height: 60px;
                font-size: 3.5rem;
            }
            
            .search-bar {
                padding: 14px 50px 14px 20px;
                font-size: 1rem;
            }
        }

        @media (max-width: 768px) {
            .page {
                padding: 10px;
            }
            
            .content {
                padding: 15px;
                background-color: rgba(255, 255, 255, 0.8);
            }
            
            .headline {
                font-size: 2.2rem;
            }
            
            .description {
                font-size: 1rem;
                margin-bottom: 30px;
            }
            
            /* BUTTON FIX IS HERE - This overrides RTL */
            .button-container {
                flex-direction: column !important;
                align-items: center !important;
                gap: 15px !important;
                width: 100% !important;
            }
            
            [dir="rtl"] .button-container {
                flex-direction: column !important;
                align-items: center !important;
            }
            
            .btn {
                width: 100% !important;
                max-width: 300px !important;
                margin: 0 auto !important;
            }
            
            .gallery-title {
                font-size: 2rem;
            }
            
            .desktop-gallery {
                display: none;
            }
            
            .mobile-gallery {
                display: flex !important;
            }
            
            .nav-arrow {
                display: none;
            }
            
            .search-container {
                margin-bottom: 30px;
            }
            
            .search-bar {
                padding: 12px 45px 12px 15px;
            }
            
            .search-icon {
                right: 15px;
            }
            
            .clear-search {
                right: 40px;
            }
        }

        @media (max-width: 480px) {
            .headline {
                font-size: 1.8rem;
            }
            
            .content {
                padding: 10px;
            }
            
            .person-photo, .mobile-person-photo {
                height: 200px;
            }
            
            .person-name, .mobile-person-name {
                font-size: 1.2rem;
            }
            
            .search-bar {
                font-size: 0.95rem;
            }
        }

        /* =========================================== */
        /* NEW: Report Page and Missing Page Styles */
        /* =========================================== */
        #report-page .content,
        #missing-page .content {
            background-color: white !important;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            max-width: 800px;
            text-align: center;
        }

        .message-text {
            font-size: 2rem;
            color: #333;
            margin-bottom: 40px;
            line-height: 1.6;
            padding: 0 20px;
        }

        .channel-link {
            font-size: 1.8rem;
            color: #5e0808;
            font-weight: bold;
            text-decoration: none;
            border-bottom: 2px solid #5e0808;
            padding-bottom: 5px;
            transition: all 0.3s ease;
        }

        .channel-link:hover {
            color: #ae2f2f;
            border-bottom-color: #ae2f2f;
            transform: scale(1.05);
        }

        @media (max-width: 768px) {
            .message-text {
                font-size: 1.5rem;
            }
            .channel-link {
                font-size: 1.3rem;
            }
        }

        @media (max-width: 480px) {
            .message-text {
                font-size: 1.2rem;
            }
            .channel-link {
                font-size: 1.1rem;
            }
        }
    </style>
    
    <!-- Add Vazirmatn font for Persian support -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vazirmatn@33.003/font.css">
</head>
<body dir="ltr">
    <!-- Language Toggle Button -->
    <div class="language-toggle" id="language-toggle">
        <span class="language-flag">ğŸ‡¬ğŸ‡§</span>
        <span class="language-text">English</span>
    </div>

    <!-- Front Page -->
    <div id="front-page" class="page active">
        <div class="content">
            <h1 class="headline" data-en="List Of People In Custody and In Danger of Death penalty In Iran" data-fa="Ù„ÛŒØ³Øª Ø§ÙØ±Ø§Ø¯ Ø¨Ø§Ø²Ø¯Ø§Ø´Øª Ø´Ø¯Ù‡ Ùˆ Ø¯Ø± Ø®Ø·Ø± Ø§Ø¹Ø¯Ø§Ù…">List Of People In Custody and In Danger of Death penalty In Iran</h1>
            <p class="description" data-en="These lists are gathered from reliable sources, Mostly from families across social media platforms such as X, Telegram and Instagram." 
               data-fa="ØªÙ‡ÛŒÙ‡ Ø§ÛŒÙ† Ù„ÛŒØ³Øª Ù‡Ø§ Ø§Ø² Ø·Ø±ÛŒÙ‚ Ù…Ù†Ø§Ø¨Ø¹ Ù…ÙˆØ«Ù‚ Ùˆ Ù‚Ø§Ø¨Ù„ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† ØµÙˆØ±Øª Ú¯Ø±ÙØªÙ‡ Ø§Ø³Øª Ú©Ù‡ Ø§Ú©Ø«Ø± Ù†Ø§Ù… Ù‡Ø§ ØªÙˆØ³Ø· Ø®Ø§Ù†ÙˆØ§Ø¯Ù‡ Ù‡Ø§ Ø¯Ø± Ù¾Ù„ØªÙØ±Ù… Ù‡Ø§ÛŒ Ø§ÛŒÚ©Ø³ØŒ ØªÙ„Ú¯Ø±Ø§Ù… Ùˆ Ø§ÛŒÙ†Ø³ØªØ§Ú¯Ø±Ø§Ù… Ø§Ù†ØªØ´Ø§Ø± ÛŒØ§ÙØªÙ‡ Ø§Ù†Ø¯.">
                These lists are gathered from reliable sources, Mostly from families across social media platforms such as X, Telegram and Instagram.
            </p>
            <div class="button-container">
                <button class="btn btn-primary" id="btn-page2" data-en="List Of People" data-fa="Ù„ÛŒØ³Øª Ø§ÙØ±Ø§Ø¯">List Of People</button>
                <button class="btn btn-secondary" id="btn-other" data-en="Report an Endangered Person" data-fa="Ú¯Ø²Ø§Ø±Ø´ Ø§ÙØ±Ø§Ø¯ Ø¯Ø± Ù…Ø¹Ø±Ø¶ Ø®Ø·Ø±">Report an Endangered Person</button>
            </div>
        </div>
    </div>

    <!-- Second Page - In Custody button removed -->
    <div id="second-page" class="page">
        <div class="content">
            <button class="back-button" id="back-to-front" data-en="â† Back" data-fa="â† Ø¨Ø§Ø²Ú¯Ø´Øª">â† Back</button>
            <h1 class="headline" data-en="List Of People" data-fa="Ù„ÛŒØ³Øª Ø§ÙØ±Ø§Ø¯">List Of People</h1>
            <p class="description" data-en="" data-fa="">
                
            </p>
            <div class="button-container">
                <button class="btn btn-primary" id="btn-lost-persons" data-en="In Danger Of Death Penalty" data-fa="Ø¯Ø± Ø®Ø·Ø± Ø§Ø¹Ø¯Ø§Ù…">In Danger Of Death Penalty</button>
                <button class="btn btn-secondary" id="btn-category2" data-en="Missing" data-fa="Ù…ÙÙ‚ÙˆØ¯ Ø´Ø¯Ù‡">Missing</button>
                <!-- In Custody button removed as requested -->
            </div>
        </div>
    </div>

    <!-- Lost Persons Gallery Page -->
    <div id="gallery-page" class="page page-container">
        <div class="nav-arrow left" id="prev-page">â€¹</div>
        <div class="nav-arrow right" id="next-page">â€º</div>
        
        <div class="content">
            <button class="back-button" id="back-to-second" data-en="â† Back" data-fa="â† Ø¨Ø§Ø²Ú¯Ø´Øª">â† Back</button>
            <h1 class="gallery-title" data-en="People In Danger Of Death Penalty" data-fa="Ø§ÙØ±Ø§Ø¯ Ø¯Ø± Ø®Ø·Ø± Ø§Ø¹Ø¯Ø§Ù…">People In Danger Of Death Penalty</h1>
            
            <!-- Search Bar -->
            <div class="search-container">
                <input type="text" class="search-bar" id="search-bar" placeholder="Search by name..." 
                       data-en-placeholder="Search by name..." 
                       data-fa-placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù†Ø§Ù…...">
                <button class="clear-search" id="clear-search">âœ•</button>
                <div class="search-icon"></div>
                <div class="search-info" data-en="The '*' symbol next to names indicates that their sentences may be carried out imminently." 
                     data-fa="Ø¹Ù„Ø§Ù…Øª '*' Ø¯Ø± Ú©Ù†Ø§Ø± Ù†Ø§Ù… Ù‡Ø§ Ø¨Ù‡ Ù…Ø¹Ù†Ø§ÛŒ Ø§Ù…Ú©Ø§Ù† Ù‚Ø±ÛŒØ¨ Ø§Ù„ÙˆÙ‚ÙˆØ¹ Ø¨ÙˆØ¯Ù† Ø²Ù…Ø§Ù† Ø§Ø¬Ø±Ø§ÛŒ Ø§Ø­Ú©Ø§Ù… Ø¢Ù†Ù‡Ø§Ø³Øª.">
                    The '*' symbol next to names indicates that their sentences may be carried out imminently.
                </div>
            </div>
            
            <!-- No results message -->
            <div class="no-results" id="no-results" data-en="No matching persons found. If you know any person in danger of death penalty, please report us." 
                 data-fa="ÙØ±Ø¯ÛŒ Ø¨Ø§ Ø§ÛŒÙ† Ù…Ø´Ø®ØµØ§Øª ÛŒØ§ÙØª Ù†Ø´Ø¯. Ø§Ú¯Ø± Ø´Ø®Øµ Ø¯Ø± Ù…Ø¹Ø±Ø¶ Ø®Ø·Ø±ÛŒ Ø±Ø§ Ù…ÛŒØ´Ù†Ø§Ø³ÛŒØ¯ Ú©Ù‡ Ù†Ø§Ù…Ø´ Ø¯Ø± Ù„ÛŒØ³Øª Ù†ÛŒØ³ØªØŒ Ø¢Ù† Ø±Ø§ Ø¨Ù‡ Ù…Ø§ Ú¯Ø²Ø§Ø±Ø´ Ø¯Ù‡ÛŒØ¯.">
                <p>No matching persons found. If you know any person in danger of death penalty, please report us.</p>
            </div>
            
            <!-- Desktop layout (6 per page) -->
            <div class="desktop-gallery six-per-page" id="desktop-gallery">
                <!-- Content will be populated by JavaScript -->
            </div>
            
            <!-- Mobile layout (8 per page) -->
            <div class="mobile-gallery" id="mobile-gallery">
                <!-- Content will be populated by JavaScript -->
            </div>
            
            <!-- PAGINATION - NUMERAL NAVIGATOR for BOTH Desktop AND Mobile -->
            <div class="pagination-container" id="pagination-container">
                <!-- Content will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Report Page -->
    <div id="report-page" class="page">
        <div class="content">
            <button class="back-button" id="back-to-front-from-report" data-en="â† Back" data-fa="â† Ø¨Ø§Ø²Ú¯Ø´Øª">â† Back</button>
            <div class="message-text" data-en="Please contact @shiftedpropaganda via direct message to report individuals." 
                 data-fa="Ø¨Ø±Ø§ÛŒ Ú¯Ø²Ø§Ø±Ø´ Ø§ÙØ±Ø§Ø¯ Ø¨Ù‡ Ø¯Ø§ÛŒØ±Ú©Øª Ú†Ù†Ù„ @shiftedpropaganda Ù…Ø±Ø§Ø¬Ø¹Ù‡ Ú©Ù†ÛŒØ¯.">
                Please contact @shiftedpropaganda via direct message to report individuals.
            </div>
            <div style="margin-top: 20px;">
                <a href="https://t.me/shiftedpropaganda" target="_blank" class="channel-link" data-en="@shiftedpropaganda" data-fa="@shiftedpropaganda">@shiftedpropaganda</a>
            </div>
        </div>
    </div>

    <!-- Missing Page -->
    <div id="missing-page" class="page">
        <div class="content">
            <button class="back-button" id="back-to-second-from-missing" data-en="â† Back" data-fa="â† Ø¨Ø§Ø²Ú¯Ø´Øª">â† Back</button>
            <div class="message-text" data-en="This section is under development." 
                 data-fa="Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø¯Ø±Ø­Ø§Ù„ ØªÚ©Ù…ÛŒÙ„ Ø§Ø³Øª.">
                This section is under development.
            </div>
        </div>
    </div>

<script>
    // ============================================
    // FIXED: Language Switching Works Immediately
    // ============================================
    
    // Multi-language data structure
    var appData = {
        currentLanguage: 'en',
        languages: {
            en: {
                name: "English",
                flag: "ğŸ‡¬ğŸ‡§",
                dir: "ltr"
            },
            fa: {
                name: "ÙØ§Ø±Ø³ÛŒ",
                flag: "ğŸ‡®ğŸ‡·", 
                dir: "rtl"
            }
        },
        
        lostPersons: {
            // ============================================
            // PERSIAN NAMES - With * for priority
            // ============================================
            names_fa: [
                "1. * Ø´Ø±ÙˆÛŒÙ† Ø¨Ø§Ù‚Ø±ÛŒØ§Ù†",
                "2. * ØµØ§Ù„Ø­ Ù…Ø­Ù…Ø¯ÛŒ",
                "3. Ø§Ù…ÛŒØ¯ Ø¬Ø§Ù†Ù…ÛŒ",
                "4. Ù…Ø­Ù…Ø¯ Ø¹Ø¨Ø§Ø³ÛŒ",
                "5. Ù…Ø­Ù…Ø¯ Ø§Ù…ÛŒÙ† Ø±Ù‡Ø¨Ø±",
                "6. Ø§Ù…ÛŒØ± Ù…Ø¬Ù„Ù„ Ø¬ÙˆØ¨Ø±ÛŒ",
                "7. ÙØ§Ø·Ù…Ù‡ Ù…Ù‚ØµÙˆØ¯ÛŒ",
                "8. Ø§Ù…ÛŒØ¯ Ø¢Ø±Ø§",
                "9. Ù¾Ø±ÙˆÛŒØ² Ø®Ø³Ø±ÙˆÛŒ",
                "10. Ù…ÛŒÙ„Ø§Ø¯ Ù…ÙˆØ«Ù‚ÛŒ",
                "11. * Ø§Ù…ÛŒØ±Ø­Ø³ÛŒÙ† Ù¾ÙˆÛŒØ§Ù†",
                "12. Ù…Ø­Ù…Ø¯Ø±Ø¶Ø§ Ø®ÛŒØ±Ù…Ù†Ø¯",
                "13. Ø§Ù…ÛŒØ±Ø­Ø³ÛŒÙ† Ø¢Ø°Ø±Ù¾ÛŒØ±Ø§",
                "14. Ù…Ø§Ø¦Ø¯Ù‡ Ø¯ÙˆÙ„Øª Ø¢Ø¨Ø§Ø¯ÛŒ",
                "15. Ù…ÛŒÙ„Ø§Ø¯ Ø§Ø±Ù…ÙˆÙ†",
                "16. Ø¹Ø±ÙØ§Ù† Ø³Ù„Ø·Ø§Ù†ÛŒ",
                "17. Ø­Ù…ÛŒØ¯Ø±Ø¶Ø§ ÙˆØ·Ù†ÛŒ",
                "18. * Ø­Ø§Ù…Ø¯ Ù…Ù„Ø§Ø­Ø³ÛŒÙ†ÛŒ",
                "19. Ø³Ø¹ÛŒØ¯ Ø¹Ø§Ø¨Ø¯ÛŒ",
                "20. Ø­Ù…Ø²Ù‡ Ø­Ø³Ù† Ù¾ÙˆØ±",
                "21. Ø§Ù…ÛŒØ¯ Ú©Ù…Ø§Ù„ÛŒ",
                "22. Ø§Ø¨Ø±Ø§Ù‡ÛŒÙ… Ù‡ÙˆØ´ÛŒØ§Ø±",
                "23. Ø¬ÙˆØ§Ø¯ Ø±Ø§Ø¯Ù…Ø±Ø¯",
                "24. * Ø¹Ù„ÛŒ Ú©Ø±ÛŒÙ…â€Œâ€ŒÙ¾ÙˆØ± ",
                "25. ÛŒÙˆØ³Ù Ø§Ø­Ù…Ø¯ÛŒ",
                "26. ØµÙ„Ø§Ø­â€ŒØ§Ù„Ø¯ÛŒÙ† ÛŒÙˆØ³ÙÛŒ",
                "27. Ù…Ø±ØªØ¶ÛŒ Ù…Ø±Ø¯Ø§Ù†ÛŒ",
                "28. Ù…Ø­Ø³Ù† Ø¨Ù‡Ø±Ø§Ù…ÛŒ",
                "29. Ù†ÙˆÛŒØ¯ ØµÙØ§",
                "30. Ø³Ø§Ø³Ø§Ù† Ø®Ø¯Ø§Ù¾Ø±Ø³Øª",
                "31. Ø³Ù„Ù…Ø§Ù† Ù†Ø¸Ø± Ø­Ù‚ÛŒÙ‚ÛŒ",
                "32. Ø¨Ø±Ù‡Ø§Ù† Ø³Ø§Ù…ÛŒ Ú©ÛŒØ§",
                "33. ÙØ±Ø´Ø§Ø¯ Ù…Ø­Ù…ÙˆØ¯ÛŒØ§Ù†",
                "34. Ø§ÛŒÙ„ÛŒØ§ Ø¨Ù† Ø±Ø´ÛŒØ¯",
                "35. Ø§Ø¨ÙˆØ§Ù„ÙØ¶Ù„ ØµØ§Ù„Ø­ÛŒ",
                "36. Ù…Ù‡Ø¯ÛŒ Ø¯Ø³ØªÚ¯Ø±Ø¯ÛŒ",
                "37. Ø§Ø­Ù…Ø¯Ø±Ø¶Ø§ Ø§ÙØ´Ø§Ø±ÛŒ Ù†Ú˜Ø§Ø¯",
                "38. Ù…Ø­Ù…Ø¯ Ø§ÙÚ†Ù†Ú¯ÛŒ",
                "39. Ø­Ø³Ø§Ù… Ø§Ø¹ØªÙ…Ø§Ø¯",
                "40. Ø¹Ù„ÛŒ ØµÙØ±ÛŒ",
                "41. Ù…ÛŒØ«Ù… Ø­Ø³ÛŒÙ†ÛŒ",
                "42. Ù…Ù‡Ø¯ÛŒ Ø¨Ù‡Ø§Ø¯Ø±Ø§Ù†ÛŒ",
                "43. Ø§Ù…ÛŒØ±Ø¹Ù„ÛŒ Ø¯Ø§Ø±Ú©ÛŒ",
                "44. Ù¾ÛŒÙ…Ø§Ù† Ù…ÙˆÙ…Ù†ÛŒ",
                "45. Ù…Ø§Ø¦Ø¯Ù‡ Ø¯Ø§Ù†Ø´Ù…Ù†Ø¯",
                "46. Ù…Ø­Ù…Ø¯ Ú©Ø±ÛŒÙ…Ø®Ø§Ù†ÛŒ",
                "47. * Ù…Ø­Ù…Ø¯Ø±Ø¶Ø§ Ø·Ø¨Ø±ÛŒ",
                "48. Ø³Ø¹ÛŒØ¯ Ø²Ø§Ø±Ø¹ Ú©Ø±Ø¯Ø´ÙˆÙ„ÛŒ",
                "49. Ø¬Ø§ÙˆÛŒØ¯ Ø®Ø§Ù„Øµ",
                "50. * Ø¢Ø±Ù…ÛŒÙ† Ø§Ø³Ø¯Ø²Ø§Ø¯Ù‡",
                "51. Ø­Ø³ÛŒÙ† Ø¨Ù†Ø¯Ø§Ù†ÛŒ",
                "52. Ø§Ø¨ÙˆØ§Ù„ÙØ¶Ù„ Ú©Ø±ÛŒÙ…ÛŒ",
                "53. Ù…Ø­Ù…Ø¯Ø§Ù…ÛŒÙ† Ø¨ÛŒÚ¯Ù„Ø±ÛŒ",
                "54. Ù…Ø³ØªÙˆØ±Ù‡ Ù†Ø±ÛŒÙ…Ø§Ù†ÛŒ",
                "55. Ø³Ù…ÛŒÙ‡ Ù†Ø¸Ø±ÛŒ",
                "56. Ø¹Ù„ÛŒ Ù…ÙˆØ³ÙˆÛŒâ€ŒÙ†ÛŒØ§",
                "57. Ø§Ù…ÛŒØ±Ø­Ø³ÛŒÙ† Ø´Ø¹Ø¨Ø§Ù†â€ŒØ²Ø§Ø¯Ù‡",
                "58. Ø­Ø³ÛŒÙ† Ù…ÛŒØ®Ú© Ø¨ÛŒØ±Ø§Ù†ÙˆÙ†Ø¯",
                "59. ÙˆØ­ÛŒØ¯ Ø®Ø¯Ø±ÛŒ Ø®ÙˆØ§Ù‡",
                "60. Ù†Ø§ØµØ± Ø¨Ú©Ø±Ø²Ø§Ø¯Ù‡",
                "62. Ø±Ø­Ù…Ø§Ù† Ú©ÛŒØ§Ù†ÛŒ ÙˆÙØ§",
                "63. Ø¢Ø±Ù…Ø§Ù† Ú©ÛŒØ§Ù†ÛŒ ÙˆÙØ§",
                "64. Ù…Ø­Ù…Ø¯ Ø²ÛŒØºÙ…ÛŒ",
                "65. Ù†ÛŒÙ„ÙˆÙØ± Ø§ØµÙÙ‡Ø§Ù†ÛŒ",
                "66. Ø¹Ù„ÛŒ (Ø¢Ø±ÛŒÙ†) ÙÙ‡ÛŒÙ…",
                "67. Ù…Ø­Ù…Ø¯ Ø­Ø³ÛŒÙ† Ø­Ø³ÛŒÙ†ÛŒ",
                "68. Ø¹Ù„ÛŒ Ø®ÙˆØ´Ù†ÛŒØ§Ù†",
                "69. Ø¨Ù‡Ø±ÙˆØ² Ø¨Ø§Ø³Ø±Ù‡",
                "70. Ù†Ø¬Ù…Ù‡ Ù…Ø­Ù…Ø¯ÛŒ",
                "71. Ø¹Ù„ÛŒØ±Ø¶Ø§ Ø¨Ø±Ù…Ø±Ø²Ù¾ÙˆØ±Ù†Ø§Ú©",
                "72. Ø§Ù…ÛŒØ± Ø³Ø§Ø±Ø¨Ø§Ù†",
                "73. Ù…Ø­Ø³Ù† Ø®Ø¯Ø§ÛŒÛŒ",
                "74. ÙØ±Ø²Ø§Ø¯ Ù‚Ø§Ø¯Ø±ÛŒ",
                "75. Ø¢Ø±ÛŒÙ† Ù…ÙˆÙÙ‚ÛŒ",
                "76. * Ø§Ø­Ø³Ø§Ù† Ø­Ø³ÛŒÙ†ÛŒâ€ŒÙ¾ÙˆØ± Ø­ØµØ§Ø±Ù„Ùˆ",
                "77. * Ù…ØªÛŒÙ† Ù…Ø­Ù…Ø¯ÛŒ",
                "78. * Ø¹Ø±ÙØ§Ù† Ø§Ù…ÛŒØ±ÛŒ",
                "79. * Ù…Ø­Ù…Ø¯ Ø­Ø³ÛŒÙ† Ø´Ú©Ø±ÛŒ",
                "80. * Ø§Ù…ÛŒØ± Ù„Ø§Ù„ÛŒ ",
                "81. * Ø§Ù…ÛŒØ±Ø­Ø³ÛŒÙ† Ø­Ø§ØªÙ…ÛŒâ€¬â©",
                "82.  Ø¯ÛŒØ§Ù†Ø§ Ø·Ø§Ù‡Ø±Ø¢Ø¨Ø§Ø¯ÛŒâ€¬â©"
            ],
            
            // ============================================
            // ENGLISH NAMES - With * for priority
            // ============================================
            names_en: [
                "1. * Shervin Bagherian",
                "2. * Saleh Mohammadi",
                "3. Omid Janami",
                "4. Mohammad Abbasi",
                "5. Mohammad Amin Rahbar",
                "6. Amir Mohammad Mojallal Joubari",
                "7. Fateme Maqsoudi",
                "8. Omid Ara",
                "9. Parviz Khosravi",
                "10. Milad Movasegh",
                "11. * Amirhossein Pouyan",
                "12. Mohammadreza Kheirmand",
                "13. Amirhossein Azarpira",
                "14. Maede Dolatabadi",
                "15. Milad Armon",
                "16. Erfan Soltani",
                "17. Hamidreza Vatani",
                "18. * Hamed Mollahoseini",
                "19. Saeed Abedi",
                "20. Hamzeh Hassanpour",
                "21. Omid Kamali",
                "22. Ebrahim Houshyar",
                "23. Javad Radmard",
                "24. * Ali Karimpour",
                "25. Yousef Ahmadi",
                "26. Saleheddin Yousefi",
                "27. Morteza Mardani",
                "28. Mohsen Bahrami",
                "29. Navid Safa",
                "30. Sasan Khodaparast",
                "31. Salman NazarHaghighi",
                "32. Borhan Sami Kia",
                "33. Farshad Mahmoudian",
                "34. Ilya Ben Rashid",
                "35. Abolfazl Salehi",
                "36. Mehdi Dastgardi",
                "37. Ahmadreza Afshari Nejad",
                "38. Mohammad Afchangi",
                "39. Hesam Etemad",
                "40. Ali Safari",
                "41. Meysam Hosseini",
                "42. Mehdi Bahadorani",
                "43. AmirAli Darki",
                "44. Peyman Momeni",
                "45. Maedeh Daneshmand",
                "46. Mohammad Karimkhani",
                "47. Mohammadreza Tabari",
                "48. Saeed Zare Kordshooli",
                "49. Javid Khales",
                "50. * Armin Asadzadeh",
                "51. Hossein Bandani",
                "52. Abolfazl Karimi",
                "53. Mohammadamin Biglari",
                "54. Mastoure Narimani",
                "55. Somayeh Nazari",
                "56. Ali Mousavinia",
                "57. Amirhossein Shabanzadeh",
                "58. Hossein Mikhak Beyranvand",
                "59. Vahid Khedrikhah",
                "60. Naser Bakrzadeh",
                "62. Rahman Kianivafa",
                "63. Arman Kianivafa",
                "64. Mohammad Zeghmi",
                "65. Niloofar Esfahani",
                "66. Ali (Arian) Fahim",
                "67. MohammadHossein Hosseini",
                "68. Ali Khoshniyan",
                "69. Behrouz Basereh",
                "70. Najmeh Mohammadi",
                "71. Alireza Barmerzpournak",
                "72. Amir Sarban",
                "73. Mohsen Khodaei",
                "74. Farzad Ghaderi",
                "75. Arian Movafaghi",
                "76. * Ehsan Hosseinipour Hesarlo",
                "77. * Matin Mohammadi",
                "78. * Erfan Amiri",
                "79. * Mohammad Hossein Shokri",
                "80. * Amir Lali",
                "81. * AmirHossein Hatami",
                "82. Diana TaherAbadi"
            ],
            
            // ============================================
            // DATES - Persian (Jalali) with 1404 for missing years
            // ============================================
            dates_fa: [
                "1. Ø¯ÛŒ 1404",
                "2. 25 Ø¯ÛŒ 1404",
                "3. Ø¯ÛŒ 1404",
                "4. Ø¯ÛŒ 1404",
                "5. Ø¯ÛŒ 1404",
                "6. Ø¯ÛŒ 1404",
                "7. Ø¯ÛŒ 1404",
                "8. 19 Ø¯ÛŒ 1404",
                "9. 18 Ø¯ÛŒ 1404",
                "10. 19 Ø¯ÛŒ 1404",
                "11. 19 1404 Ø¯ÛŒ",
                "12. Ø¯ÛŒ 1404",
                "13. Ø¯ÛŒ 1404",
                "14. Ø¯ÛŒ 1404",
                "15. Ø§Ø¹ØªØ±Ø§Ø¶Ø§Øª 1401",
                "16. Ø¯ÛŒ 1404",
                "17. 19 Ø¯ÛŒ 1404",
                "18. 18 Ø¯ÛŒ 1404",
                "19. Ø¯ÛŒ 1404",
                "20. Ø¨Ù‡Ù…Ù† 1404",
                "21. 22 Ø¯ÛŒ 1404",
                "22. 8 Ø¨Ù‡Ù…Ù† 1404",
                "23. Ø¯ÛŒ 1404",
                "24. Ø¯ÛŒ 1404",
                "25. 8 Ø§Ø±Ø¯ÛŒØ¨Ù‡Ø´Øª 1399",
                "26. Ø¯ÛŒ 1404",
                "27. 18 Ø¯ÛŒ 1404",
                "28. Ø¯ÛŒ 1404",
                "29. Ø¯ÛŒ 1404",
                "30. 19 Ø¯ÛŒ 1404",
                "31. Ø¯ÛŒ 1404",
                "32. Ø¯ÛŒ 1404",
                "33. Ø¯ÛŒ 1404",
                "34. 22 Ø¯ÛŒ 1404",
                "35. Ø¯ÛŒ 1404",
                "36. 18 Ø¯ÛŒ 1404",
                "37. 19 Ø¯ÛŒ 1404",
                "38. Ø¯ÛŒ 1404",
                "39. Ø¯ÛŒ 1404",
                "40. 18 Ø¯ÛŒ 1404",
                "41. Ø¯ÛŒ 1404",
                "42. Ø¯ÛŒ 1404",
                "43. Ø¯ÛŒ 1404",
                "44. 21 Ø¯ÛŒ 1404",
                "45. 21 Ø¯ÛŒ 1404",
                "46. 18 Ø¯ÛŒ 1404",
                "47. Ø¯ÛŒ 1404",
                "48. 21 Ø¯ÛŒ 1404",
                "49. 30 Ø¯ÛŒ 1404",
                "50. Ø¯ÛŒ 1404",
                "51. Ø¯ÛŒ 1404",
                "52. 18 Ø¯ÛŒ 1404",
                "53. 18 Ø¯ÛŒ 1404",
                "54. 21 Ø¯ÛŒ 1404",
                "55. Ø¯ÛŒ 1404",
                "56. Ø¯ÛŒ 1404",
                "57. 18 Ø¯ÛŒ 1404",
                "58. Ø¯ÛŒ 1404",
                "59. Ø¯ÛŒ 1404",
                "60. Ù†Ø§Ù…Ø´Ø®Øµ",
                "62. Ø¯ÛŒ 1404",
                "63. Ø¯ÛŒ 1404",
                "64. Ø¯ÛŒ 1404",
                "65. 20 Ø¯ÛŒ 1404",
                "66. 18 Ø¯ÛŒ 1404",
                "67. 12 Ø¨Ù‡Ù…Ù† 1404",
                "68. 18 Ø¯ÛŒ 1404",
                "69. Ø¯ÛŒ 1404",
                "70. Ø¨Ù‡Ù…Ù† 1404",
                "71. 13 Ø¢Ø¨Ø§Ù† 1401",
                "72. Ø¯ÛŒ 1404",
                "73. Ø¯ÛŒ 1404",
                "74. Ø¯ÛŒ 1404",
                "75. 24 Ø¯ÛŒ 1404",
                "76. Ø¯ÛŒ 1404",
                "77. Ø¯ÛŒ 1404",
                "78. Ø¯ÛŒ 1404",
                "79. Ø¯ÛŒ 1404",
                "80. Ø¯ÛŒ 1404",
                "81. 18 Ø¯ÛŒ 1404",
                "82. Ø¨Ù‡Ù…Ù† 1404 5"
            ],
            
            // ============================================
            // DATES - English (Gregorian) with 2026 for missing years
            // ============================================
            dates_en: [
                "1. January 2026",
                "2. January 15, 2026",
                "3. January 2026",
                "4. January 2026",
                "5. January 2026",
                "6. January 2026",
                "7. January 2026",
                "8. January 9, 2026",
                "9. January 8, 2026",
                "10. January 9, 2026",
                "11. January 9, 2026",
                "12. January 2026",
                "13. January 2026",
                "14. January 2026",
                "15. 2022 Protests",
                "16. January 2026",
                "17. January 9, 2026",
                "18. January 8, 2026",
                "19. January 2026",
                "20. January 2026",
                "21. January 11, 2026",
                "22. January 29, 2026",
                "23. January 2026",
                "24. January 2026",
                "25. April 27, 2020",
                "26. January 2026",
                "27. January 8, 2026",
                "28. January 2026",
                "29. January 2026",
                "30. January 9, 2026",
                "31. January 2026",
                "32. January 2026",
                "33. January 2026",
                "34. January 12, 2026",
                "35. January 2026",
                "36. January 8, 2026",
                "37. January 9, 2026",
                "38. January 2026",
                "39. January 2026",
                "40. January 8, 2026",
                "41. January 2026",
                "42. January 2026",
                "43. January 2026",
                "44. January 11, 2026",
                "45. January 11, 2026",
                "46. January 8, 2026",
                "47. January 2026",
                "48. January 11, 2026",
                "49. January 20, 2026",
                "50. January 2026",
                "51. January 2026",
                "52. January 8, 2026",
                "53. January 8, 2026",
                "54. January 11, 2026",
                "55. January 2026",
                "56. January 2026",
                "57. January 8, 2026",
                "58. January 2026",
                "59. January 2026",
                "60. Unknown",
                "62. January 2026",
                "63. January 2026",
                "64. January 2026",
                "65. January 10, 2026",
                "66. January 8, 2026",
                "67. February 1, 2026",
                "68. January 8, 2026",
                "69. January 2026",
                "70. February 2026",
                "71. November 4, 2022",
                "72. January 2026",
                "73. January 2026",
                "74. January 2026",
                "75. January 14, 2026",
                "76. January 2026",
                "77. January 2026",
                "78. January 2026",
                "79. January 2026",
                "80. January 2026",
                "81. January 8, 2026",
                "82. January 25, 2026"
            ],
            
            // ============================================
            // LINKS - All from your list
            // ============================================
            links_en: [
                "1. https://x.com/navidmohebbi/status/2015510834458300766?s=20",
                "2. https://x.com/realRayanAmiri/status/2016971951458439288?s=20",
                "3. https://x.com/melianouss/status/2015177925826428964?s=20",
                "4. https://x.com/Farazein7/status/2016642865267372392?s=20",
                "5. https://x.com/Realneo101/status/2016433790105575911?s=20",
                "6. https://x.com/titi_ava/status/2016285317574103302?s=20",
                "7. https://x.com/army5921818579/status/2021920579029278970?s=20",
                "8. https://x.com/sonofniche/status/2019050352406933536?s=20",
                "9. https://x.com/KhatibiOfficial/status/2016818103762448781?s=20",
                "10. https://x.com/hayleymshll/status/2016998417017213316?s=20",
                "11. https://x.com/saarmot/status/2019794838095356103?s=20",
                "12. https://x.com/hisweirdmother/status/2018073552868503919?s=20",
                "13. https://x.com/NikiPatriot/status/2017593631931023521?s=20",
                "14. https://x.com/Jeanne2022Rev/status/2017030355648131134?s=20",
                "15. https://x.com/Somewheretoyap/status/2016956118753333381?s=20",
                "16. https://x.com/HengawO/status/2011211442641310084?s=20",
                "17. https://x.com/rainygirl1401/status/2021637449546694692?s=20",
                "18. https://x.com/bisangar_IR/status/2018694835570409857?s=20",
                "19. https://x.com/army5921818579/status/2021920294928322801?s=20",
                "20. https://x.com/followupiran/status/2020936928443396568?s=20",
                "21. https://x.com/Askharfeldman/status/2017226626874941943?s=20",
                "22. https://x.com/blcksull/status/2017759861702873558?s=20",
                "23. https://x.com/yellow7swan/status/2017576892627394969?s=20",
                "24. https://x.com/Alibro494056/status/2019431864113803525?s=20",
                "25. https://x.com/Jeanne2022Rev/status/2016504122585858236?s=20",
                "26. https://x.com/army5921818579/status/2019384260214551044?s=20",
                "27. https://x.com/blcksull/status/2017757840706884010?s=20",
                "28. https://x.com/Gomnam20006/status/2017448299112894544?s=20",
                "29. https://x.com/ARDESHIR005/status/2018390354030915599?s=20",
                "30. https://x.com/Spokyyy_/status/2017402824200487320?s=20",
                "31. https://x.com/ARDESHIR005/status/2017510285532123331?s=20",
                "32. https://x.com/KhatibiOfficial/status/2017891072966295803?s=20",
                "33. https://x.com/bisangar_IR/status/2018709865175073070?s=20",
                "34. https://x.com/kikicalingyou/status/2018091768210743506?s=20",
                "35. https://x.com/YEKIazYEKI/status/2018650815788200068?s=20",
                "36. https://x.com/bisangar_IR/status/2017346383892607135?s=20",
                "37. https://x.com/avin585/status/2021365374399414384?s=20",
                "38. https://x.com/AMIRKABIRbozorg/status/2020883794249818282?s=20",
                "39. https://x.com/negaar_abd/status/2020137351473676592?s=20",
                "40. https://x.com/moonlif7/status/2018663978340372708?s=20",
                "41. https://x.com/ImanOracle/status/2019324662828920875?s=20",
                "42. https://x.com/shayanihimself/status/2018431559309656492?s=20",
                "43. https://x.com/golbinrad/status/2018457704579363151?s=20",
                "44. https://x.com/itsongbird7777/status/2018489166346981391?s=20",
                "45. https://x.com/itsongbird7777/status/2018489166346981391?s=20",
                "46. https://x.com/sonofniche/status/2020865127445094665?s=20",
                "47. https://x.com/bisangar_IR/status/2020522157743198590?s=20",
                "48. https://x.com/mahshid_nazemi/status/2018269981058670609?s=20",
                "49. https://x.com/ARDESHIR005/status/2019703806502883558?s=20",
                "50. https://x.com/Iliaaaa6/status/2016136705435107768?s=20",
                "51. https://x.com/mamduamiri94/status/2019091524005543953?s=20",
                "52. https://x.com/__Injaneb96/status/2020282332452941890?s=20",
                "53. https://x.com/bisangar_IR/status/2023427836611358864?s=20",
                "54. https://x.com/Nargesjala2995/status/2019683942408859687?s=20",
                "55. https://x.com/Jeanne2022Rev/status/2019936849314070688?s=20",
                "56. https://x.com/sonofniche/status/2020588702586835343?s=20",
                "57. https://x.com/itsongbird7777/status/2020217042922537071?s=20",
                "58. https://x.com/Sssccpp/status/2019503863192006805?s=20",
                "59. https://x.com/army5921818579/status/2020099770035917154?s=20",
                "60. https://x.com/hra_news/status/2019831827985244211?s=20",
                "62. https://x.com/Iliaaaa6/status/2020849323894804869?s=20",
                "63. https://x.com/Iliaaaa6/status/2020849323894804869?s=20",
                "64. https://x.com/mobinahw/status/2023450354365722723?s=20",
                "65. https://x.com/Stervende__/status/2020161662129410133?s=20",
                "66. https://x.com/bisangar_IR/status/2025306688828461310?s=20",
                "67. https://x.com/sanfrancisco_z/status/2023179852527079881?s=20",
                "68. https://x.com/bisangar_IR/status/2019803904608002375?s=20",
                "69. https://x.com/Ewenniii/status/2020536715706826761?s=20",
                "70. https://x.com/Goftaniha/status/2021327519564091816?s=20",
                "71. https://x.com/bisangar_IR/status/2022316120644915224?s=20",
                "72. https://x.com/MahmOcean/status/2021488605840146865?s=20",
                "73. https://x.com/aow_alireza/status/2022802490379637101?s=20",
                "74. https://x.com/Ewenniii/status/2022570151707632028?s=20",
                "75. https://x.com/KhatibiOfficial/status/2022283202279190565?s=20",
                "76. https://x.com/Ehsan_HoZa/status/2022647897733632072?s=20",
                "77. https://x.com/Ehsan_HoZa/status/2022647897733632072?s=20",
                "78. https://x.com/Ehsan_HoZa/status/2022647897733632072?s=20",
                "79. https://x.com/18Mandana/status/2023414235666305458?s=20",
                "80. https://x.com/Ewenniii/status/2025990469147140537?s=20",
                "81. https://x.com/followupiran/status/2026007755165675658?s=46",
                "82. https://x.com/nikimahjoub/status/2026194317115605062?s=46"
            ],
            
            // Persian links (same as English)
            links_fa: [
                "1. https://x.com/navidmohebbi/status/2015510834458300766?s=20",
                "2. https://x.com/realRayanAmiri/status/2016971951458439288?s=20",
                "3. https://x.com/melianouss/status/2015177925826428964?s=20",
                "4. https://x.com/Farazein7/status/2016642865267372392?s=20",
                "5. https://x.com/Realneo101/status/2016433790105575911?s=20",
                "6. https://x.com/titi_ava/status/2016285317574103302?s=20",
                "7. https://x.com/army5921818579/status/2021920579029278970?s=20",
                "8. https://x.com/sonofniche/status/2019050352406933536?s=20",
                "9. https://x.com/KhatibiOfficial/status/2016818103762448781?s=20",
                "10. https://x.com/hayleymshll/status/2016998417017213316?s=20",
                "11. https://x.com/saarmot/status/2019794838095356103?s=20",
                "12. https://x.com/hisweirdmother/status/2018073552868503919?s=20",
                "13. https://x.com/NikiPatriot/status/2017593631931023521?s=20",
                "14. https://x.com/Jeanne2022Rev/status/2017030355648131134?s=20",
                "15. https://x.com/Somewheretoyap/status/2016956118753333381?s=20",
                "16. https://x.com/HengawO/status/2011211442641310084?s=20",
                "17. https://x.com/rainygirl1401/status/2021637449546694692?s=20",
                "18. https://x.com/bisangar_IR/status/2018694835570409857?s=20",
                "19. https://x.com/army5921818579/status/2021920294928322801?s=20",
                "20. https://x.com/followupiran/status/2020936928443396568?s=20",
                "21. https://x.com/Askharfeldman/status/2017226626874941943?s=20",
                "22. https://x.com/blcksull/status/2017759861702873558?s=20",
                "23. https://x.com/yellow7swan/status/2017576892627394969?s=20",
                "24. https://x.com/Alibro494056/status/2019431864113803525?s=20",
                "25. https://x.com/Jeanne2022Rev/status/2016504122585858236?s=20",
                "26. https://x.com/army5921818579/status/2019384260214551044?s=20",
                "27. https://x.com/blcksull/status/2017757840706884010?s=20",
                "28. https://x.com/Gomnam20006/status/2017448299112894544?s=20",
                "29. https://x.com/ARDESHIR005/status/2018390354030915599?s=20",
                "30. https://x.com/Spokyyy_/status/2017402824200487320?s=20",
                "31. https://x.com/ARDESHIR005/status/2017510285532123331?s=20",
                "32. https://x.com/KhatibiOfficial/status/2017891072966295803?s=20",
                "33. https://x.com/bisangar_IR/status/2018709865175073070?s=20",
                "34. https://x.com/kikicalingyou/status/2018091768210743506?s=20",
                "35. https://x.com/YEKIazYEKI/status/2018650815788200068?s=20",
                "36. https://x.com/bisangar_IR/status/2017346383892607135?s=20",
                "37. https://x.com/avin585/status/2021365374399414384?s=20",
                "38. https://x.com/AMIRKABIRbozorg/status/2020883794249818282?s=20",
                "39. https://x.com/negaar_abd/status/2020137351473676592?s=20",
                "40. https://x.com/moonlif7/status/2018663978340372708?s=20",
                "41. https://x.com/ImanOracle/status/2019324662828920875?s=20",
                "42. https://x.com/shayanihimself/status/2018431559309656492?s=20",
                "43. https://x.com/golbinrad/status/2018457704579363151?s=20",
                "44. https://x.com/itsongbird7777/status/2018489166346981391?s=20",
                "45. https://x.com/itsongbird7777/status/2018489166346981391?s=20",
                "46. https://x.com/sonofniche/status/2020865127445094665?s=20",
                "47. https://x.com/bisangar_IR/status/2020522157743198590?s=20",
                "48. https://x.com/mahshid_nazemi/status/2018269981058670609?s=20",
                "49. https://x.com/ARDESHIR005/status/2019703806502883558?s=20",
                "50. https://x.com/Iliaaaa6/status/2016136705435107768?s=20",
                "51. https://x.com/mamduamiri94/status/2019091524005543953?s=20",
                "52. https://x.com/__Injaneb96/status/2020282332452941890?s=20",
                "53. https://x.com/bisangar_IR/status/2023427836611358864?s=20",
                "54. https://x.com/Nargesjala2995/status/2019683942408859687?s=20",
                "55. https://x.com/Jeanne2022Rev/status/2019936849314070688?s=20",
                "56. https://x.com/sonofniche/status/2020588702586835343?s=20",
                "57. https://x.com/itsongbird7777/status/2020217042922537071?s=20",
                "58. https://x.com/Sssccpp/status/2019503863192006805?s=20",
                "59. https://x.com/army5921818579/status/2020099770035917154?s=20",
                "60. https://x.com/hra_news/status/2019831827985244211?s=20",
                "62. https://x.com/Iliaaaa6/status/2020849323894804869?s=20",
                "63. https://x.com/Iliaaaa6/status/2020849323894804869?s=20",
                "64. https://x.com/mobinahw/status/2023450354365722723?s=20",
                "65. https://x.com/Stervende__/status/2020161662129410133?s=20",
                "66. https://x.com/bisangar_IR/status/2025306688828461310?s=20",
                "67. https://x.com/sanfrancisco_z/status/2023179852527079881?s=20",
                "68. https://x.com/bisangar_IR/status/2019803904608002375?s=20",
                "69. https://x.com/Ewenniii/status/2020536715706826761?s=20",
                "70. https://x.com/Goftaniha/status/2021327519564091816?s=20",
                "71. https://x.com/bisangar_IR/status/2022316120644915224?s=20",
                "72. https://x.com/MahmOcean/status/2021488605840146865?s=20",
                "73. https://x.com/aow_alireza/status/2022802490379637101?s=20",
                "74. https://x.com/Ewenniii/status/2022570151707632028?s=20",
                "75. https://x.com/KhatibiOfficial/status/2022283202279190565?s=20",
                "76. https://x.com/Ehsan_HoZa/status/2022647897733632072?s=20",
                "77. https://x.com/Ehsan_HoZa/status/2022647897733632072?s=20",
                "78. https://x.com/Ehsan_HoZa/status/2022647897733632072?s=20",
                "79. https://x.com/18Mandana/status/2023414235666305458?s=20",
                "80. https://x.com/Ewenniii/status/2025990469147140537?s=20",
                "81. https://x.com/followupiran/status/2026007755165675658?s=46",
                "82. https://x.com/nikimahjoub/status/2026194317115605062?s=46"
            ],
            
            // ============================================
            // IMAGE FILES - Exact numbers from your list
            // ============================================
            photos: [
                "dp/1.jpg",
                "dp/2.jpg", 
                "dp/3.jpg",
                "dp/4.jpg",
                "dp/5.jpg",
                "dp/6.jpg",
                "dp/7.jpg",
                "dp/8.jpg",
                "dp/9.jpg",
                "dp/10.jpg",
                "dp/11.jpg",
                "dp/12.jpg",
                "dp/13.jpg",
                "dp/14.jpg",
                "dp/15.jpg",
                "dp/16.jpg",
                "dp/17.jpg",
                "dp/18.jpg",
                "dp/19.jpg",
                "dp/20.jpg",
                "dp/21.jpg",
                "dp/22.jpg",
                "dp/23.jpg",
                "dp/24.jpg",
                "dp/25.jpg",
                "dp/26.jpg",
                "dp/27.jpg",
                "dp/28.jpg",
                "dp/29.jpg",
                "dp/30.jpg",
                "dp/31.jpg",
                "dp/32.jpg",
                "dp/33.jpg",
                "dp/34.jpg",
                "dp/35.jpg",
                "dp/36.jpg",
                "dp/37.jpg",
                "dp/38.jpg",
                "dp/39.jpg",
                "dp/40.jpg",
                "dp/41.jpg",
                "dp/42.jpg",
                "dp/43.jpg",
                "dp/44.jpg",
                "dp/45.jpg",
                "dp/46.jpg",
                "dp/47.jpg",
                "dp/48.jpg",
                "dp/49.jpg",
                "dp/50.jpg",
                "dp/51.jpg",
                "dp/52.jpg",
                "dp/53.jpg",
                "dp/54.jpg",
                "dp/55.jpg",
                "dp/56.jpg",
                "dp/57.jpg",
                "dp/58.jpg",
                "dp/59.jpg",
                "dp/60.jpg",
                "dp/62.jpg",
                "dp/63.jpg",
                "dp/64.jpg",
                "dp/65.jpg",
                "dp/66.jpg",
                "dp/67.jpg",
                "dp/68.jpg",
                "dp/69.jpg",
                "dp/70.jpg",
                "dp/71.jpg",
                "dp/72.jpg",
                "dp/73.jpg",
                "dp/74.jpg",
                "dp/75.jpg",
                "dp/76.jpg",
                "dp/77.jpg",
                "dp/78.jpg",
                "dp/79.jpg",
                "dp/80.jpg",
                "dp/81.jpg",
                "dp/82.jpg"
            ]
        }
    };

    // Global variables
    var currentPage = 1;
    var isSearching = false;
    // Desktop shows 6 people per page, Mobile shows 8 people per page
    var itemsPerPageDesktop = 6;
    var itemsPerPageMobile = 8;
    
    // Cache
    var cachedItems = null;
    var cachedLanguage = null;
    var cachedSearchTerm = null;

    // Helper function to check if mobile
    function isMobile() {
        return window.innerWidth <= 768;
    }

    // Handle missing images
    function handleMissingImage(imgElement, index) {
        imgElement.onerror = function() {
            console.warn("Image not found, using placeholder");
            this.src = "https://via.placeholder.com/300x400/1a5a7a/ffffff?text=Person+" + (index + 1);
            this.alt = "Placeholder";
        };
    }

    // Language switching - IMMEDIATE update
    function switchLanguage(lang) {
        appData.currentLanguage = lang;
        var langData = appData.languages[lang];
        
        // Update HTML direction
        document.body.dir = langData.dir;
        document.documentElement.lang = lang;
        
        // Update language toggle button
        var toggleBtn = document.getElementById('language-toggle');
        var flagSpan = toggleBtn.querySelector('.language-flag');
        var textSpan = toggleBtn.querySelector('.language-text');
        
        flagSpan.textContent = langData.flag;
        textSpan.textContent = lang === 'en' ? 'ÙØ§Ø±Ø³ÛŒ' : 'English';
        
        // Update all text elements
        updateTextElements();
        
        // Update search bar placeholder
        var searchBar = document.getElementById('search-bar');
        if (searchBar) {
            searchBar.placeholder = lang === 'en' 
                ? searchBar.getAttribute('data-en-placeholder') 
                : searchBar.getAttribute('data-fa-placeholder');
        }
        
        // Force clear cache and reset to page 1
        cachedItems = null;
        cachedLanguage = null;
        cachedSearchTerm = null;
        currentPage = 1;
        
        // Force immediate re-render
        renderGallery();
        
        // Save preference
        localStorage.setItem('preferredLanguage', lang);
    }

    // Update text elements
    function updateTextElements() {
        var elements = document.querySelectorAll('[data-en], [data-fa]');
        
        for (var i = 0; i < elements.length; i++) {
            var element = elements[i];
            if (appData.currentLanguage === 'en') {
                if (element.hasAttribute('data-en')) {
                    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                        element.placeholder = element.getAttribute('data-en');
                    } else {
                        element.textContent = element.getAttribute('data-en');
                    }
                }
            } else {
                if (element.hasAttribute('data-fa')) {
                    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                        element.placeholder = element.getAttribute('data-fa');
                    } else {
                        element.textContent = element.getAttribute('data-fa');
                    }
                }
            }
        }
    }

    // ============================================
    // FIXED: Parse name - REMOVES NUMBERS FROM DISPLAY
    // ============================================
    function parseName(nameString) {
        // Check for priority star
        var hasPriority = nameString.indexOf('*') !== -1;
        
        // Remove the number prefix (like "1. " or "12. ") and the star
        // This regex removes: start of string, digits, dot, space, and optional star+space
        var cleanName = nameString.replace(/^\d+\.\s*\*?\s*/, '').trim();
        
        return {
            displayName: cleanName,
            hasPriority: hasPriority
        };
    }

    // ============================================
    // Parse date - REMOVES NUMBERS FROM DISPLAY
    // ============================================
    function parseDate(dateString) {
        if (!dateString) return 'Unknown';
        // Remove the number prefix (like "1. " or "12. ")
        return dateString.replace(/^\d+\.\s*/, '').trim();
    }

    // Parse link
    function parseLink(linkString) {
        if (!linkString) return '#';
        var match = linkString.match(/\d+\.\s*(.+)/);
        return match ? match[1] : linkString;
    }

    // Get current data with priority sorting
    function getCurrentData() {
        var lang = appData.currentLanguage;
        
        var nameArray = appData.lostPersons["names_" + lang] || appData.lostPersons.names_en;
        var dateArray = appData.lostPersons["dates_" + lang] || appData.lostPersons.dates_en;
        var linkArray = appData.lostPersons["links_" + lang] || appData.lostPersons.links_en;
        var photosArray = appData.lostPersons.photos;
        
        var combined = [];
        
        for (var i = 0; i < nameArray.length; i++) {
            var parsed = parseName(nameArray[i]);
            var date = dateArray[i] || (i + 1 + ". Date Unknown");
            var link = linkArray[i] || (i + 1 + ". #");
            var photo = photosArray[i] || "images/placeholder.jpg";
            
            combined.push({
                displayName: parsed.displayName,
                hasPriority: parsed.hasPriority,
                date: date,
                link: link,
                photo: photo,
                index: i
            });
        }
        
        // Sort: priority first
        combined.sort(function(a, b) {
            if (a.hasPriority && !b.hasPriority) return -1;
            if (!a.hasPriority && b.hasPriority) return 1;
            return 0;
        });
        
        return {
            items: combined
        };
    }

    // Get filtered items
    function getFilteredItems(searchTerm) {
        var currentLang = appData.currentLanguage;
        
        if (cachedLanguage !== currentLang || cachedSearchTerm !== searchTerm || cachedItems === null) {
            var currentData = getCurrentData();
            var allItems = currentData.items;
            
            if (!searchTerm || searchTerm.trim() === '') {
                cachedItems = allItems;
                isSearching = false;
            } else {
                var term = searchTerm.toLowerCase().trim();
                var filtered = [];
                
                for (var i = 0; i < allItems.length; i++) {
                    if (allItems[i].displayName.toLowerCase().indexOf(term) !== -1) {
                        filtered.push(allItems[i]);
                    }
                }
                
                cachedItems = filtered;
                isSearching = true;
            }
            
            cachedLanguage = currentLang;
            cachedSearchTerm = searchTerm;
        }
        
        return cachedItems;
    }

    // Render gallery
    function renderGallery() {
        var searchTerm = document.getElementById('search-bar') ? document.getElementById('search-bar').value : '';
        var items = getFilteredItems(searchTerm);
        
        var desktopGallery = document.getElementById('desktop-gallery');
        var mobileGallery = document.getElementById('mobile-gallery');
        var paginationContainer = document.getElementById('pagination-container');
        var noResultsMsg = document.getElementById('no-results');
        
        if (!desktopGallery || !mobileGallery || !paginationContainer) return;
        
        // Clear existing content
        desktopGallery.innerHTML = '';
        mobileGallery.innerHTML = '';
        paginationContainer.innerHTML = '';
        
        // Show/hide no results
        if (items.length === 0) {
            if (noResultsMsg) noResultsMsg.style.display = 'block';
            desktopGallery.style.display = 'none';
            mobileGallery.style.display = 'none';
            paginationContainer.style.display = 'none';
            return;
        } else {
            if (noResultsMsg) noResultsMsg.style.display = 'none';
            
            // Set display based on screen size
            var mobile = isMobile();
            desktopGallery.style.display = mobile ? 'none' : 'grid';
            mobileGallery.style.display = mobile ? 'flex' : 'none';
            paginationContainer.style.display = 'flex'; // Always show pagination
        }
        
        var totalItems = items.length;
        
        // Use different items per page for desktop vs mobile
        var itemsPerPage = isMobile() ? itemsPerPageMobile : itemsPerPageDesktop;
        var totalPages = Math.ceil(totalItems / itemsPerPage);
        
        if (currentPage < 1) currentPage = 1;
        if (currentPage > totalPages) currentPage = totalPages;
        
        var dateLabel = appData.currentLanguage === 'en' ? 'Arrested since:' : 'Ø¨Ø§Ø²Ø¯Ø§Ø´Øª Ø´Ø¯Ù‡ Ø§Ø²:';
        
        // Desktop or Mobile gallery - paginated based on device
        var startIndex = (currentPage - 1) * itemsPerPage;
        var endIndex = Math.min(startIndex + itemsPerPage, totalItems);
        
        for (var i = startIndex; i < endIndex; i++) {
            var item = items[i];
            if (!item) continue;
            
            var link = parseLink(item.link);
            var displayName = item.displayName || 'Unknown';
            var priorityStar = item.hasPriority ? '<span class="priority-star">*</span>' : '';
            
            // Parse date to remove numbers
            var displayDate = parseDate(item.date);
            
            if (isMobile()) {
                // Mobile card
                var mobileCard = document.createElement('div');
                mobileCard.className = 'mobile-person-card';
                mobileCard.style.animationDelay = (0.4 + ((i - startIndex) % 8) * 0.1) + 's';
                mobileCard.innerHTML = '<img src="' + (item.photo || 'images/placeholder.jpg') + '" alt="' + displayName + '" class="mobile-person-photo"><div class="mobile-person-info"><div class="mobile-person-name"><a href="' + link + '" target="_blank" rel="noopener noreferrer">' + displayName + priorityStar + '</a></div><div class="mobile-person-date">' + dateLabel + ' ' + displayDate + '</div></div>';
                mobileGallery.appendChild(mobileCard);
                
                var mobileImg = mobileCard.querySelector('.mobile-person-photo');
                if (mobileImg) handleMissingImage(mobileImg, item.index || 0);
            } else {
                // Desktop card
                var personCard = document.createElement('div');
                personCard.className = 'person-card';
                personCard.style.animationDelay = (0.5 + ((i - startIndex) % 6) * 0.1) + 's';
                personCard.innerHTML = '<img src="' + (item.photo || 'images/placeholder.jpg') + '" alt="' + displayName + '" class="person-photo"><div class="person-info"><div class="person-name"><a href="' + link + '" target="_blank" rel="noopener noreferrer">' + displayName + priorityStar + '</a></div><div class="person-date">' + dateLabel + ' ' + displayDate + '</div></div>';
                desktopGallery.appendChild(personCard);
                
                var img = personCard.querySelector('.person-photo');
                if (img) handleMissingImage(img, item.index || 0);
            }
        }
        
        // ============================================
        // PAGINATION - NUMERAL NAVIGATOR for BOTH Desktop AND Mobile
        // ============================================
        for (var p = 1; p <= totalPages; p++) {
            var pageNumber = document.createElement('div');
            pageNumber.className = 'page-number' + (p === currentPage ? ' active' : '');
            pageNumber.dataset.page = p;
            pageNumber.textContent = p;
            
            pageNumber.addEventListener('click', function() {
                currentPage = parseInt(this.dataset.page);
                renderGallery();
            });
            
            paginationContainer.appendChild(pageNumber);
        }
        
        // Trigger animations
        setTimeout(function() {
            var cards = document.querySelectorAll('.person-card, .mobile-person-card');
            for (var c = 0; c < cards.length; c++) {
                cards[c].style.animation = 'none';
                cards[c].offsetHeight;
                cards[c].style.animation = 'cardFadeIn 0.8s ease-out ' + cards[c].style.animationDelay + ' forwards';
            }
        }, 50);
    }

    // Page navigation
    document.addEventListener('DOMContentLoaded', function() {
        var frontPage = document.getElementById('front-page');
        var secondPage = document.getElementById('second-page');
        var galleryPage = document.getElementById('gallery-page');
        var reportPage = document.getElementById('report-page');
        var missingPage = document.getElementById('missing-page');
        
        var btnPage2 = document.getElementById('btn-page2');
        var btnOther = document.getElementById('btn-other');
        var btnLostPersons = document.getElementById('btn-lost-persons');
        var btnCategory2 = document.getElementById('btn-category2');
        // btnCategory3 removed
        var backToFront = document.getElementById('back-to-front');
        var backToSecond = document.getElementById('back-to-second');
        var backToFrontFromReport = document.getElementById('back-to-front-from-report');
        var backToSecondFromMissing = document.getElementById('back-to-second-from-missing');
        
        var prevPage = document.getElementById('prev-page');
        var nextPage = document.getElementById('next-page');
        
        var searchBar = document.getElementById('search-bar');
        var clearSearchBtn = document.getElementById('clear-search');
        var languageToggle = document.getElementById('language-toggle');
        
        // Load saved language
        var savedLanguage = localStorage.getItem('preferredLanguage');
        if (savedLanguage && (savedLanguage === 'en' || savedLanguage === 'fa')) {
            setTimeout(function() {
                switchLanguage(savedLanguage);
            }, 10);
        }
        
        // Language toggle
        languageToggle.addEventListener('click', function() {
            var newLang = appData.currentLanguage === 'en' ? 'fa' : 'en';
            switchLanguage(newLang);
        });
        
        // Show page function - FIXED: Preserve back button visibility
        function showPage(page) {
            var allPages = document.querySelectorAll('.page');
            for (var i = 0; i < allPages.length; i++) {
                allPages[i].classList.remove('active');
                // Don't hide back buttons, just deactivate pages
            }
            
            // Reset animations for the new page
            page.style.animation = 'none';
            page.offsetHeight;
            page.style.animation = 'pageFadeIn 0.8s ease-out forwards';
            page.classList.add('active');
            
            // Reset and trigger animations for content elements
            var content = page.querySelector('.content');
            if (content) {
                content.style.animation = 'none';
                content.offsetHeight;
                content.style.animation = 'contentFadeIn 1s ease-out 0.3s forwards';
            }
            
            // Reset and trigger animations for headline
            var headline = page.querySelector('.headline, .gallery-title');
            if (headline) {
                headline.style.animation = 'none';
                headline.offsetHeight;
                headline.style.animation = 'textFadeIn 1s ease-out 0.5s forwards';
            }
            
            // Reset and trigger animations for description
            var description = page.querySelector('.description');
            if (description) {
                description.style.animation = 'none';
                description.offsetHeight;
                description.style.animation = 'textFadeIn 1s ease-out 0.7s forwards';
            }
            
            // Reset and trigger animations for buttons
            var buttonContainer = page.querySelector('.button-container');
            if (buttonContainer) {
                buttonContainer.style.animation = 'none';
                buttonContainer.offsetHeight;
                buttonContainer.style.animation = 'buttonsFadeIn 1s ease-out 0.9s forwards';
            }
            
            // Reset and trigger animations for individual buttons
            var buttons = page.querySelectorAll('.btn');
            for (var j = 0; j < buttons.length; j++) {
                buttons[j].style.animation = 'none';
                buttons[j].offsetHeight;
                buttons[j].style.animation = 'buttonFadeIn 0.8s ease-out ' + (1 + (j * 0.2)) + 's forwards';
            }
            
            // Reset and trigger animations for search bar if on gallery page
            var searchContainer = page.querySelector('.search-container');
            if (searchContainer) {
                searchContainer.style.animation = 'none';
                searchContainer.offsetHeight;
                searchContainer.style.animation = 'searchFadeIn 0.8s ease-out 0.6s forwards';
            }
            
            // Reset and trigger animations for arrows if on gallery page
            if (page.id === 'gallery-page') {
                var arrows = [prevPage, nextPage];
                for (var k = 0; k < arrows.length; k++) {
                    if (arrows[k]) {
                        arrows[k].style.animation = 'none';
                        arrows[k].offsetHeight;
                        arrows[k].style.animation = 'arrowFadeIn 0.8s ease-out 0.5s forwards';
                    }
                }
                
                if (searchBar) {
                    searchBar.value = '';
                    clearSearchBtn.style.display = 'none';
                }
                currentPage = 1;
                cachedItems = null;
                cachedLanguage = null;
                cachedSearchTerm = null;
                
                setTimeout(function() {
                    renderGallery();
                }, 300);
            }
        }
        
        // FIXED: Event listeners for back buttons - ensure they work
        if (backToFront) {
            backToFront.addEventListener('click', function(event) {
                event.preventDefault();
                showPage(frontPage);
            });
        }
        
        if (backToSecond) {
            backToSecond.addEventListener('click', function(event) {
                event.preventDefault();
                showPage(secondPage);
            });
        }
        
        if (backToFrontFromReport) {
            backToFrontFromReport.addEventListener('click', function(event) {
                event.preventDefault();
                showPage(frontPage);
            });
        }
        
        if (backToSecondFromMissing) {
            backToSecondFromMissing.addEventListener('click', function(event) {
                event.preventDefault();
                showPage(secondPage);
            });
        }
        
        // Event listeners for navigation buttons
        if (btnPage2) {
            btnPage2.addEventListener('click', function() { 
                showPage(secondPage); 
            });
        }
        
        // Report button leads to report page
        if (btnOther) {
            btnOther.addEventListener('click', function() {
                showPage(reportPage);
            });
        }
        
        if (btnLostPersons) {
            btnLostPersons.addEventListener('click', function() {
                currentPage = 1;
                showPage(galleryPage);
            });
        }
        
        // Missing button leads to missing page
        if (btnCategory2) {
            btnCategory2.addEventListener('click', function() {
                showPage(missingPage);
            });
        }
        
        // btnCategory3 event listener removed
        
        // Navigation arrows
        if (prevPage) {
            prevPage.addEventListener('click', function() {
                var items = getFilteredItems(searchBar ? searchBar.value : '');
                var itemsPerPage = isMobile() ? itemsPerPageMobile : itemsPerPageDesktop;
                var totalPages = Math.ceil(items.length / itemsPerPage);
                
                if (totalPages > 0) {
                    if (currentPage > 1) {
                        currentPage--;
                    } else {
                        currentPage = totalPages;
                    }
                    renderGallery();
                }
            });
        }
        
        if (nextPage) {
            nextPage.addEventListener('click', function() {
                var items = getFilteredItems(searchBar ? searchBar.value : '');
                var itemsPerPage = isMobile() ? itemsPerPageMobile : itemsPerPageDesktop;
                var totalPages = Math.ceil(items.length / itemsPerPage);
                
                if (totalPages > 0) {
                    if (currentPage < totalPages) {
                        currentPage++;
                    } else {
                        currentPage = 1;
                    }
                    renderGallery();
                }
            });
        }
        
        // Search
        if (searchBar) {
            searchBar.addEventListener('input', function() {
                currentPage = 1;
                clearSearchBtn.style.display = this.value.trim() !== '' ? 'block' : 'none';
                cachedSearchTerm = null;
                cachedItems = null;
                
                clearTimeout(this.searchTimeout);
                var self = this;
                this.searchTimeout = setTimeout(function() {
                    renderGallery();
                }, 300);
            });
        }
        
        // Clear search
        if (clearSearchBtn) {
            clearSearchBtn.addEventListener('click', function() {
                if (searchBar) {
                    searchBar.value = '';
                    clearSearchBtn.style.display = 'none';
                    currentPage = 1;
                    cachedSearchTerm = null;
                    cachedItems = null;
                    renderGallery();
                    searchBar.focus();
                }
            });
        }
        
        // Window resize
        window.addEventListener('resize', function() {
            renderGallery();
        });
        
        // Initial render
        setTimeout(function() {
            renderGallery();
        }, 100);
    });
</script>
</body>
</html>




